<h1>Contatos</h1>

<div class="input-group rounded">

    <form action="" method="post" onsubmit="return false;">

        <div class="form-group mb-3">
            <label>Digite o nome do contato a buscar</label>
            <input type="text" id="search-input" class="form-control" name="nome" required>
        </div>

        <div class="form-group mt-3">
            <button type="submit" class="btn btn-success" id="search-button">Buscar</button>
        </div>

    </form>
</div>

<hr>

<section id="contatos">

    {{contatos}}

</section>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        // Event listener for the search button click
        $('#search-button').click(function() {
            // Get the user input from the search input field
            var searchQuery = $('#search-input').val().toLowerCase();

            // Loop through each pessoa card and hide/show based on the search query
            $('.card').each(function() {
                var pessoaName = $(this).find('.card-header').text().toLowerCase();
                var pessoaCpf = $(this).find('.card-body').text().toLowerCase();
                
                // Check if the pessoa's name or CPF contains the search query
                if (pessoaName.includes(searchQuery) || pessoaCpf.includes(searchQuery)) {
                    // Show the card if it matches the search query
                    $(this).show();
                } else {
                    // Hide the card if it does not match the search query
                    $(this).hide();
                }
            });
        });
    });
</script>